<html>
  <head>
    <title>Automated Resource Handling for Java - AutoRes.uk</title>
    <link rel="stylesheet" href="styles.css" type="text/css">
    <meta name="description" content="Open source library for automating embedded Java resource file handling">
    <link rel="icon" href="icons/favicon.png">
  </head>
  <body>

    <nav>
      <ul>
        <li><a href="apidocs/index.html">API</a></li>
        <li><a href="https://github.com/autores-uk/autores">Source Code</a></li>
        <li><a href="https://github.com/autores-uk/autores/tree/main/code/examples">Examples</a></li>
        <li><a href="https://github.com/autores-uk/autores/blob/main/LICENSE.txt">Copyright</a></li>
        <li><a href="screenshots.html">Screenshots</a></li>
      </ul>
    </nav>

    <h1 id="autores">AutoRes.uk</h1>

    <p>
      Annotation driven <a href="https://dev.java/">Java&trade;</a> open source library for automating embedded resource file handling
      -
      an alternative to <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getResourceAsStream-java.lang.String-">getResourceAsStream</a>.
    </p>

    <ul>
      <li>Validate resource names with the compiler</li>
      <li>Replace manual resource file I/O handling with generated byte arrays or strings</li>
      <li>Replace localization <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/PropertyResourceBundle.html">resource bundle messages</a> with typed method signatures</li>
      <li>Create <a href="https://www.graalvm.org">GraalVM</a> native images without the need for <a href="https://www.graalvm.org/latest/reference-manual/native-image/dynamic-features/Resources/">resource manifests</a></li>
      <li>Extend with additional generators or validators</li>
    </ul>

    <p>
      AutoRes.uk is a compile-time only dependency and does not need to be distributed with application code.
    </p>

    <h2>Usage <a id="usage" href="#usage" class="link-symbol">&#x1f517;</a></h2>

    <p>
      Browse the <a href="https://central.sonatype.com/artifact/uk.autores/annotations">central repository</a> 
      for a build system import snippet for the <code>uk.autores:annotations</code> library.
    </p>

    <p>
      Annotate a type or package with <code>@ResourceFiles</code>, define the resource files, and choose a handler.
    </p>

    <h3>Examples <a id="examples" href="#examples" class="link-symbol">&#x1f517;</a></h3>

    <p>
      The <code>GenerateStringsFromText</code> handler creates one class per text file that provides the file content as a <code>String</code>.
    </p>

    <pre><code>
    import uk.autores.*;
    
    <code>@ResourceFiles(
      value = {"Poule.txt", "Roses.txt"},
      handler = GenerateStringsFromText.class
    )</code>
    public class PrintRhymes {
      public static void main(String...args)  {
        System.out.println(<code>Poule.text()</code>);
        System.out.println(<code>Roses.text()</code>);
      }
    }
    </code></pre>

    <p>
      The <code>GenerateMessagesFromProperties</code> handler can generate typed methods that match on a locale and then format the string.
    </p>

    <pre><code>
    import uk.autores.*;
    import java.time.ZonedDateTime;
    import java.util.Locale;

    <code>@ResourceFiles(
      value = "messages.properties",
      handler = GenerateMessagesFromProperties.class,
      namer = IdiomaticNamer.class
    )</code>
    public class PrintMessage {
      public static void main(String[] args) {
        var locale = Locale.getDefault();
        int planet = 4;
        var time = ZonedDateTime.now();
        var event = "a meteor strike";
        <em>/* planet-event=At {1,time} on {2,date}, there was {3} on planet {0,number,integer}. */</em>
        String msg = <code>Messages.planetEvent(locale, planet, time, time, event)</code>;
        System.out.println(msg);
      }
    }
    </code></pre>

    <p>
      Other handlers include
      <code>AssertResourceExists</code>,
      <code>GenerateByteArraysFromFiles</code>,
      <code>GenerateConstantsFromProperties</code>, and
      <code>GenerateInputStreamsFromFiles</code>.
    </p>

    <h3>Versioning &amp; Compatibility <a id="compat" href="#compat" class="link-symbol">&#x1f517;</a></h3>

    <p>Versions are split into three integers: Java version; major version; minor version.</p>

    <p>
      Functionally identical Java 8 and Java 11 versions are published.
      <em>The Java 11 version has marginally better encapsulation when modules are in use.</em>
    </p>

    <h3>Modules <a id="modules" href="#modules" class="link-symbol">&#x1f517;</a></h3>

    <p>
      Use <code>requires static uk.autores</code> in 
      <a href="https://dev.java/learn/modules/">module-info.java</a> to depend on this library at compile time only.
    </p>

    <pre><code>
    module example.module.name {
      requires static uk.autores;
    }
    </code></pre>

    <h3>Apache Maven <a id="maven" href="#maven" class="link-symbol">&#x1f517;</a></h3>

    <p>
      <a href="https://maven.apache.org/">Apache Maven</a> projects should use the 
      <a href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#dependency-scope">provided</a> scope.
    </p>

    <pre><code>
    <em>&lt;!-- Maven 3 --&gt;</em>
    &lt;dependency>
      &lt;groupId>uk.autores&lt;/groupId>
      &lt;artifactId>annotations&lt;/artifactId>
      &lt;version>${autores.version}&lt;/version>
      &lt;scope>provided&lt;/scope>
    &lt;/dependency>
    </code></pre>

    <p>
      If necessary make the compiler aware of the annotation processor using
      <a href="https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html">annotationProcessorPaths</a>.
    </p>

    <pre><code>
    <em>&lt;!-- Maven 3 --&gt;</em>
    &lt;build>
      &lt;plugins>
          &lt;plugin>
              &lt;groupId>org.apache.maven.plugins&lt;/groupId>
              &lt;artifactId>maven-compiler-plugin&lt;/artifactId>
              &lt;version>${maven.compiler.plugin.version}&lt;/version>
              &lt;configuration>
                  &lt;annotationProcessorPaths>
                      &lt;path>
                          &lt;groupId>uk.autores&lt;/groupId>
                          &lt;artifactId>annotations&lt;/artifactId>
                          &lt;version>${autores.version}&lt;/version>
                      &lt;/path>
                  &lt;/annotationProcessorPaths>
              &lt;/configuration>
          &lt;/plugin>
      &lt;/plugins>
    &lt;/build>
    </code></pre>

    <h3>Gradle <a id="gradle" href="#gradle" class="link-symbol">&#x1f517;</a></h3>

    <p>
      <a href="https://gradle.org/">Gradle</a> projects must add resource files to the classpath.
      The library must be exposed to the
      <a href="https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_plugin_and_dependency_management">annotation processor</a>.
    </p>

    <pre><code>
    <em>// Gradle 8; Kotlin syntax</em>
    var autores = "uk.autores:annotations:" + autoresVersion

    dependencies {
      compileOnly(files("src/main/resources"))
      compileOnly(autores)
      annotationProcessor(autores)
    }
    </code></pre>

  </body>
</html>
